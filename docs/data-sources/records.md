---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "secretsmanager_records Data Source - terraform-provider-secretsmanager"
subcategory: ""
description: |-
  Fetches multiple Keeper Secrets Manager records in a single API call
---

# secretsmanager_records (Data Source)

The `secretsmanager_records` data source allows you to fetch multiple Keeper Secrets Manager records in a single API call, significantly reducing API requests and improving performance when dealing with many secrets.

This is particularly useful when you need to retrieve dozens or hundreds of secrets, as it batches the requests instead of making individual API calls for each record.

## Example Usage

### Basic usage with UIDs

```terraform
data "secretsmanager_records" "batch" {
  uids = [
    "RECORD_UID_1",
    "RECORD_UID_2",
    "RECORD_UID_3"
  ]
}

# Access individual records by index
output "first_record_title" {
  value = data.secretsmanager_records.batch.records[0].title
}

# Access records by UID using the map
locals {
  record_1 = jsondecode(data.secretsmanager_records.batch.records_by_uid["RECORD_UID_1"])
}
```

### Using titles

```terraform
data "secretsmanager_records" "by_titles" {
  titles = [
    "Production Database",
    "API Gateway Config",
    "Service Account"
  ]
}

# Iterate over all records
output "all_titles" {
  value = [for r in data.secretsmanager_records.by_titles.records : r.title]
}
```

### Mixed UIDs and titles

```terraform
data "secretsmanager_records" "mixed" {
  uids = [
    "RECORD_UID_1",
    "RECORD_UID_2"
  ]
  
  titles = [
    "Production Database"
  ]
}
```

### Large batch for infrastructure

```terraform
# Define all your infrastructure secrets
locals {
  infrastructure_secret_uids = [
    "db_prod_uid",
    "db_staging_uid",
    "cache_redis_uid",
    "api_gateway_uid",
    "service_account_1_uid",
    "service_account_2_uid",
    # ... potentially hundreds more
  ]
}

# Fetch all in a single API call
data "secretsmanager_records" "infrastructure" {
  uids = local.infrastructure_secret_uids
}

# Use the secrets throughout your configuration
resource "aws_db_instance" "production" {
  username = jsondecode(
    data.secretsmanager_records.infrastructure.records_by_uid["db_prod_uid"]
  ).fields[0].value
  
  password = sensitive(
    jsondecode(
      data.secretsmanager_records.infrastructure.records_by_uid["db_prod_uid"]
    ).fields[1].value
  )
}
```

## Argument Reference

The following arguments are supported:

* `uids` - (Optional) List of record UIDs to fetch. Provides the most efficient batching when only UIDs are specified.
* `titles` - (Optional) List of record titles to fetch. Note: When titles are specified, all records must be fetched first and then filtered, which is less efficient than using UIDs directly.

~> **Note:** At least one of `uids` or `titles` must be provided.

## Attributes Reference

In addition to all arguments above, the following attributes are exported:

* `records` - List of fetched records. Each record contains:
  * `uid` - The record's unique identifier
  * `type` - The record type
  * `title` - The record title
  * `notes` - The record notes
  * `fields` - List of standard fields containing:
    * `type` - Field type
    * `label` - Field label
    * `value` - Field value (sensitive)
    * `required` - Whether the field is required
    * `privacy_screen` - Whether privacy screen is enabled
    * `enforce_generation` - Whether generation is enforced
    * `complexity` - Password complexity settings (if applicable)
  * `custom` - List of custom fields (same structure as fields)
  * `file_ref` - List of file references containing:
    * `uid` - File UID
    * `title` - File title
    * `name` - File name
    * `type` - File MIME type
    * `size` - File size in bytes
    * `last_modified` - Last modification timestamp
    * `content_base64` - File content encoded in base64

* `records_by_uid` - Map of records keyed by UID, with each value being a JSON-encoded string of the full record. This allows for direct access to records by UID without array iteration.

## Performance Considerations

* **Use UIDs when possible**: Fetching by UIDs makes a single API call with the exact records needed
* **Titles require full fetch**: When using titles, the provider must fetch all records and then filter, which is less efficient
* **Batch size**: While there's no hard limit, very large batches (500+ records) may experience longer response times

## Migration from Individual Records

If you're currently using multiple `secretsmanager_record` data sources:

```terraform
# Before - Multiple API calls
data "secretsmanager_record" "db" {
  path = "db_uid"
}

data "secretsmanager_record" "cache" {
  path = "cache_uid"
}

data "secretsmanager_record" "api" {
  path = "api_uid"
}

# After - Single API call
data "secretsmanager_records" "all" {
  uids = ["db_uid", "cache_uid", "api_uid"]
}

locals {
  db = jsondecode(data.secretsmanager_records.all.records_by_uid["db_uid"])
  cache = jsondecode(data.secretsmanager_records.all.records_by_uid["cache_uid"])
  api = jsondecode(data.secretsmanager_records.all.records_by_uid["api_uid"])
}
```

This reduces 3 API calls to 1, and scales linearly - 300 individual data sources would become 1 batched call.